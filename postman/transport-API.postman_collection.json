{
  "info": {
    "name": "Transport Sale API",
    "description": "Complete API collection for Transport Sale system with authentication, permissions, and CRUD operations.\n\n## Authentication Flow\n1. Send OTP to email\n2. Register with OTP verification\n3. Login to get access token\n4. Use access token in Bearer auth for protected endpoints\n\n## Roles\n- **staff**: Basic user, can view own info\n- **admin**: Has permissions for specific models (transports, staffs, branches)\n- **branchmanager**: Full access to their branch\n- **superadmin**: Full system access (from .env only)\n\n## Permissions\n- transports: create, read, update, delete\n- staffs: create, read, update, delete\n- branches: create, read, update, delete",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "description": "Authentication endpoints for user registration, login, and token management.",
      "item": [
        {
          "name": "Send OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "Request body format"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/send-otp",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "send-otp"]
            },
            "description": "Send OTP verification code to email. Required before registration."
          }
        },
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "Request body format"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"branch\": 1,\n    \"username\": \"johndoe\",\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\",\n    \"birth_date\": \"1990-01-15\",\n    \"gender\": \"male\",\n    \"otp\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Register a new staff member. Requires valid OTP from email.\n\n**Body Parameters:**\n- branch (required): Branch ID\n- username (required): Unique username\n- email (required): Email address (must match OTP)\n- password (required): Password\n- birth_date (required): YYYY-MM-DD format\n- gender (required): male/female\n- otp (required): 6-digit code from email"
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.data && jsonData.data.accessToken) {",
                  "    pm.collectionVariables.set(\"token\", jsonData.data.accessToken);",
                  "    pm.collectionVariables.set(\"refreshToken\", jsonData.data.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "Request body format"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Login with email and password. Returns access token and refresh token.\n\n**Body Parameters:**\n- email (required): Registered email\n- password (required): Account password\n\n**Response:**\n- accessToken: JWT for API requests (15min expiry)\n- refreshToken: Token for getting new access token"
          }
        },
        {
          "name": "Resend OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "Request body format"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"user@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/resend-otp",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "resend-otp"]
            },
            "description": "Resend OTP verification code to email. Use if previous OTP expired."
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.data && jsonData.data.accessToken) {",
                  "    pm.collectionVariables.set(\"token\", jsonData.data.accessToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "Request body format"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Get new access token using refresh token.\n\n**Body Parameters:**\n- refreshToken (required): Refresh token from login\n\n**Response:**\n- accessToken: New JWT for API requests"
          }
        },
        {
          "name": "SuperAdmin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData.data && jsonData.data.accessToken) {",
                  "    pm.collectionVariables.set(\"token\", jsonData.data.accessToken);",
                  "    pm.collectionVariables.set(\"refreshToken\", jsonData.data.refreshToken);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "description": "Request body format"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"superadmin@transport.com\",\n    \"password\": \"SuperAdmin@123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Login as SuperAdmin using credentials from .env file.\n\n**Note:** SuperAdmin is configured via environment variables:\n- SUPERADMIN_EMAIL\n- SUPERADMIN_PASSWORD\n\nUpdate the body with your .env credentials."
          }
        }
      ]
    },
    {
      "name": "Transport",
      "description": "Transport CRUD operations. Public endpoints for viewing, permission-based for modifications.",
      "item": [
        {
          "name": "Get All (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/transport",
              "host": ["{{baseUrl}}"],
              "path": ["transport"]
            },
            "description": "Get all transports. Public endpoint - no authentication required."
          }
        },
        {
          "name": "Search (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/transport/search?branch=1&color=white&model=lacetti&minPrice=1000&maxPrice=50000",
              "host": ["{{baseUrl}}"],
              "path": ["transport", "search"],
              "query": [
                { "key": "branch", "value": "1", "description": "Filter by branch ID" },
                { "key": "color", "value": "white", "description": "Filter by color (partial match)" },
                { "key": "model", "value": "lacetti", "description": "Filter by model (partial match)" },
                { "key": "minPrice", "value": "1000", "description": "Minimum price filter" },
                { "key": "maxPrice", "value": "50000", "description": "Maximum price filter" }
              ]
            },
            "description": "Search transports with filters. All query params are optional.\n\n**Query Parameters:**\n- branch: Branch ID\n- color: Color name (partial match)\n- model: Model name (partial match)\n- minPrice: Minimum price\n- maxPrice: Maximum price"
          }
        },
        {
          "name": "Get One (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/transport/1",
              "host": ["{{baseUrl}}"],
              "path": ["transport", "1"]
            },
            "description": "Get single transport by ID.\n\n**Path Parameters:**\n- id: Transport ID"
          }
        },
        {
          "name": "Get By Branch (Public)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/transport/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["transport", "branch", "1"]
            },
            "description": "Get all transports for a specific branch.\n\n**Path Parameters:**\n- branchId: Branch ID"
          }
        },
        {
          "name": "Create (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "branch", "value": "1", "type": "text", "description": "Branch ID (required)" },
                { "key": "model", "value": "Lacetti", "type": "text", "description": "Transport model (required)" },
                { "key": "color", "value": "white", "type": "text", "description": "Transport color (required)" },
                { "key": "price", "value": "12000", "type": "text", "description": "Price (required)" },
                { "key": "img", "type": "file", "src": "", "description": "Transport image (optional)" }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/transport",
              "host": ["{{baseUrl}}"],
              "path": ["transport"]
            },
            "description": "Create new transport. Requires 'transports:create' permission.\n\n**Authorization:** Bearer Token\n\n**Form Data:**\n- branch (required): Branch ID\n- model (required): Transport model name\n- color (required): Transport color\n- price (required): Price in number\n- img (optional): Image file"
          }
        },
        {
          "name": "Update (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                { "key": "model", "value": "Nexia", "type": "text", "description": "Transport model (optional)" },
                { "key": "color", "value": "black", "type": "text", "description": "Transport color (optional)" },
                { "key": "price", "value": "15000", "type": "text", "description": "Price (optional)" },
                { "key": "img", "type": "file", "src": "", "description": "New image (optional)" }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/transport/1",
              "host": ["{{baseUrl}}"],
              "path": ["transport", "1"]
            },
            "description": "Update transport. Requires 'transports:update' permission.\n\n**Authorization:** Bearer Token\n\n**Path Parameters:**\n- id: Transport ID\n\n**Form Data (all optional):**\n- model: Transport model name\n- color: Transport color\n- price: Price in number\n- img: New image file"
          }
        },
        {
          "name": "Delete (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/transport/1",
              "host": ["{{baseUrl}}"],
              "path": ["transport", "1"]
            },
            "description": "Delete transport. Requires 'transports:delete' permission.\n\n**Authorization:** Bearer Token\n\n**Path Parameters:**\n- id: Transport ID"
          }
        }
      ]
    },
    {
      "name": "Staff",
      "description": "Staff management endpoints. Permission-based access control.",
      "item": [
        {
          "name": "Get Me (Authenticated)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/staff/me",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "me"]
            },
            "description": "Get current authenticated user's info.\n\n**Authorization:** Bearer Token (any authenticated user)"
          }
        },
        {
          "name": "Get All (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/staff",
              "host": ["{{baseUrl}}"],
              "path": ["staff"]
            },
            "description": "Get all staff members. Requires 'staffs:read' permission.\n\n**Authorization:** Bearer Token"
          }
        },
        {
          "name": "Search (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/staff/search?username=john&branch=1",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "search"],
              "query": [
                { "key": "username", "value": "john", "description": "Filter by username (partial match)" },
                { "key": "branch", "value": "1", "description": "Filter by branch ID" }
              ]
            },
            "description": "Search staff with filters. Requires 'staffs:read' permission.\n\n**Authorization:** Bearer Token\n\n**Query Parameters:**\n- username: Username (partial match)\n- branch: Branch ID"
          }
        },
        {
          "name": "Get One (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/staff/1",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "1"]
            },
            "description": "Get single staff by ID. Requires 'staffs:read' permission.\n\n**Authorization:** Bearer Token\n\n**Path Parameters:**\n- id: Staff ID"
          }
        },
        {
          "name": "Create (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"branch\": 1,\n    \"username\": \"newstaff\",\n    \"password\": \"password123\",\n    \"birth_date\": \"1995-05-20\",\n    \"gender\": \"male\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/staff",
              "host": ["{{baseUrl}}"],
              "path": ["staff"]
            },
            "description": "Create new staff member. Requires 'staffs:create' permission.\n\n**Authorization:** Bearer Token\n\n**Body Parameters:**\n- branch (required): Branch ID\n- username (required): Unique username\n- password (required): Password\n- birth_date (required): YYYY-MM-DD format\n- gender (required): male/female"
          }
        },
        {
          "name": "Update (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"username\": \"updatedstaff\",\n    \"gender\": \"female\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/staff/1",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "1"]
            },
            "description": "Update staff member. Requires 'staffs:update' permission.\n\n**Authorization:** Bearer Token\n\n**Path Parameters:**\n- id: Staff ID\n\n**Body Parameters (all optional):**\n- username: New username\n- password: New password\n- birth_date: New birth date (YYYY-MM-DD)\n- gender: New gender (male/female)"
          }
        },
        {
          "name": "Delete (Permission)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/staff/1",
              "host": ["{{baseUrl}}"],
              "path": ["staff", "1"]
            },
            "description": "Delete staff member. Requires 'staffs:delete' permission.\n\n**Authorization:** Bearer Token\n\n**Path Parameters:**\n- id: Staff ID"
          }
        }
      ]
    },
    {
      "name": "Branch",
      "item": [
        {
          "name": "Get All (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch",
              "host": ["{{baseUrl}}"],
              "path": ["branch"]
            },
            "description": "Get all branches. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)"
          }
        },
        {
          "name": "Search (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch/search?name=main&address=city",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "search"],
              "query": [
                { "key": "name", "value": "main", "description": "Filter by branch name (partial match)" },
                { "key": "address", "value": "city", "description": "Filter by address (partial match)" }
              ]
            },
            "description": "Search branches with filters. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Query Parameters (all optional):**\n- name: Branch name (partial match)\n- address: Branch address (partial match)"
          }
        },
        {
          "name": "Get One (BranchAccess)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "1"]
            },
            "description": "Get single branch by ID. Requires BranchManager for their branch or SuperAdmin for any branch.\n\n**Authorization:** Bearer Token (BranchManager/SuperAdmin)\n\n**Path Parameters:**\n- id: Branch ID"
          }
        },
        {
          "name": "Create (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Main Branch\",\n    \"address\": \"123 Main Street, City\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/branch",
              "host": ["{{baseUrl}}"],
              "path": ["branch"]
            },
            "description": "Create new branch. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Body Parameters:**\n- name (required): Branch name\n- address (required): Branch address"
          }
        },
        {
          "name": "Update (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Updated Branch Name\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "1"]
            },
            "description": "Update branch. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Branch ID\n\n**Body Parameters (all optional):**\n- name: New branch name\n- address: New branch address"
          }
        },
        {
          "name": "Delete (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "1"]
            },
            "description": "Delete branch. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Branch ID"
          }
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "My Permissions (Admin+)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/my-permissions",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "my-permissions"]
            },
            "description": "Get current user's admin permissions. Requires Admin, BranchManager, or SuperAdmin role.\n\n**Authorization:** Bearer Token (Admin+)"
          }
        },
        {
          "name": "Get All (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin",
              "host": ["{{baseUrl}}"],
              "path": ["admin"]
            },
            "description": "Get all admins across all branches. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)"
          }
        },
        {
          "name": "Get Branch Admins (BranchManager)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "branch", "1"]
            },
            "description": "Get all admins for a specific branch. Requires BranchManager for their branch or SuperAdmin.\n\n**Authorization:** Bearer Token (BranchManager/SuperAdmin)\n\n**Path Parameters:**\n- branchId: Branch ID"
          }
        },
        {
          "name": "Get One (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "1"]
            },
            "description": "Get single admin by ID. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Admin ID"
          }
        },
        {
          "name": "Promote (BranchManager+)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"staff\": 1,\n    \"permission_model\": \"transports\",\n    \"permission\": [\"create\", \"read\", \"update\", \"delete\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/promote",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "promote"]
            },
            "description": "Promote staff to admin with specific permissions. Requires BranchManager or SuperAdmin role.\n\n**Authorization:** Bearer Token (BranchManager/SuperAdmin)\n\n**Body Parameters:**\n- staff (required): Staff ID to promote\n- permission_model (required): Model name (transports/staffs/branches)\n- permission (required): Array of permissions (create/read/update/delete)"
          }
        },
        {
          "name": "Promote to BranchManager (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"staff\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/promote-branchmanager",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "promote-branchmanager"]
            },
            "description": "Promote staff to BranchManager role. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Body Parameters:**\n- staff (required): Staff ID to promote to BranchManager"
          }
        },
        {
          "name": "Demote BranchManager (SuperAdmin)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/demote-branchmanager/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "demote-branchmanager", "1"]
            },
            "description": "Demote BranchManager to regular staff. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Admin ID of the BranchManager to demote"
          }
        },
        {
          "name": "Update (BranchManager+)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"permission_model\": \"staffs\",\n    \"permission\": [\"read\", \"update\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "1"]
            },
            "description": "Update admin permissions. Requires BranchManager or SuperAdmin role.\n\n**Authorization:** Bearer Token (BranchManager/SuperAdmin)\n\n**Path Parameters:**\n- id: Admin ID\n\n**Body Parameters:**\n- permission_model (required): Model name (transports/staffs/branches)\n- permission (required): Array of permissions (create/read/update/delete)"
          }
        },
        {
          "name": "Demote (BranchManager+)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/demote/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "demote", "1"]
            },
            "description": "Demote admin to regular staff. Requires BranchManager or SuperAdmin role.\n\n**Authorization:** Bearer Token (BranchManager/SuperAdmin)\n\n**Path Parameters:**\n- id: Admin ID to demote"
          }
        }
      ]
    },
    {
      "name": "Permission",
      "item": [
        {
          "name": "Own Permissions (All Authenticated)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/permission/own",
              "host": ["{{baseUrl}}"],
              "path": ["permission", "own"]
            },
            "description": "Get current user's permissions. Any authenticated user can access.\n\n**Authorization:** Bearer Token (any user)"
          }
        },
        {
          "name": "All Permissions for Staff",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/permission/1",
              "host": ["{{baseUrl}}"],
              "path": ["permission", "1"]
            },
            "description": "Get all permissions for a specific staff member. Requires appropriate access rights.\n\n**Authorization:** Bearer Token\n\n**Path Parameters:**\n- id: Staff ID"
          }
        },
        {
          "name": "Add Permission",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"staff\": 1,\n    \"permission_model\": \"transports\",\n    \"permission\": [\"create\", \"read\", \"update\", \"delete\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permission",
              "host": ["{{baseUrl}}"],
              "path": ["permission"]
            },
            "description": "Add permissions to a staff member. Requires appropriate admin rights.\n\n**Authorization:** Bearer Token\n\n**Body Parameters:**\n- staff (required): Staff ID\n- permission_model (required): Model name (transports/staffs/branches)\n- permission (required): Array of permissions (create/read/update/delete)"
          }
        },
        {
          "name": "Change Permission",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"staff\": 1,\n    \"permission_model\": \"transports\",\n    \"permission\": [\"read\", \"update\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permission",
              "host": ["{{baseUrl}}"],
              "path": ["permission"]
            },
            "description": "Update existing permissions for a staff member. Requires appropriate admin rights.\n\n**Authorization:** Bearer Token\n\n**Body Parameters:**\n- staff (required): Staff ID\n- permission_model (required): Model name (transports/staffs/branches)\n- permission (required): New array of permissions (create/read/update/delete)"
          }
        },
        {
          "name": "Delete Permission",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"staff\": 1,\n    \"permission_model\": \"transports\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/permission",
              "host": ["{{baseUrl}}"],
              "path": ["permission"]
            },
            "description": "Remove all permissions of a specific model from a staff member. Requires appropriate admin rights.\n\n**Authorization:** Bearer Token\n\n**Body Parameters:**\n- staff (required): Staff ID\n- permission_model (required): Model name to remove permissions from (transports/staffs/branches)"
          }
        }
      ]
    },
    {
      "name": "SuperAdmin",
      "item": [
        {
          "name": "Get All Branches",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch",
              "host": ["{{baseUrl}}"],
              "path": ["branch"]
            },
            "description": "Get all branches in the system. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)"
          }
        },
        {
          "name": "Search Branches",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch/search?name=main",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "search"],
              "query": [
                { "key": "name", "value": "main", "description": "Filter by branch name (partial match)" }
              ]
            },
            "description": "Search branches with filters. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Query Parameters (all optional):**\n- name: Branch name (partial match)\n- address: Branch address (partial match)"
          }
        },
        {
          "name": "Branch All Info (BranchManager+)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch/1/allinfo",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "1", "allinfo"]
            },
            "description": "Get complete branch information including all transports and staff. Requires BranchManager for their branch or SuperAdmin.\n\n**Authorization:** Bearer Token (BranchManager/SuperAdmin)\n\n**Path Parameters:**\n- id: Branch ID\n\n**Response:** Branch object with embedded transports and staffs arrays"
          }
        },
        {
          "name": "Create Branch",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Main Branch\",\n    \"address\": \"123 Main Street, City\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/branch",
              "host": ["{{baseUrl}}"],
              "path": ["branch"]
            },
            "description": "Create a new branch. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Body Parameters:**\n- name (required): Branch name\n- address (required): Branch address"
          }
        },
        {
          "name": "Update Branch",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Updated Branch\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "1"]
            },
            "description": "Update branch information. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Branch ID\n\n**Body Parameters (all optional):**\n- name: New branch name\n- address: New branch address"
          }
        },
        {
          "name": "Delete Branch",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branch/1",
              "host": ["{{baseUrl}}"],
              "path": ["branch", "1"]
            },
            "description": "Delete a branch. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Branch ID"
          }
        },
        {
          "name": "Get All Admins",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin",
              "host": ["{{baseUrl}}"],
              "path": ["admin"]
            },
            "description": "Get all admins in the system. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)"
          }
        },
        {
          "name": "Get One Admin",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "1"]
            },
            "description": "Get single admin by ID. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Admin ID"
          }
        },
        {
          "name": "Promote to BranchManager",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"staff\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/promote-branchmanager",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "promote-branchmanager"]
            },
            "description": "Promote a staff member to BranchManager role. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Body Parameters:**\n- staff (required): Staff ID to promote to BranchManager"
          }
        },
        {
          "name": "Demote BranchManager",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [{ "key": "token", "value": "{{token}}", "type": "string" }]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/demote-branchmanager/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "demote-branchmanager", "1"]
            },
            "description": "Demote a BranchManager to regular staff. Requires SuperAdmin role.\n\n**Authorization:** Bearer Token (SuperAdmin only)\n\n**Path Parameters:**\n- id: Admin ID of the BranchManager to demote"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [""]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [""]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refreshToken",
      "value": "",
      "type": "string"
    }
  ]
}
